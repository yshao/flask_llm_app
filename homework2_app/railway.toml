# ============================================================================
# RAILWAY DEPLOYMENT CONFIGURATION
# ============================================================================
# Railway automatically detects and uses this file for deployment
# Documentation: https://docs.railway.app/reference/deployment-config
# ============================================================================

# -----------------------------------------------------------------------------
# Project Configuration
# -----------------------------------------------------------------------------
[project]
# Project name (optional, defaults to repo name)
name = "flask-llm-app"

# -----------------------------------------------------------------------------
# Build Configuration
# -----------------------------------------------------------------------------
[build]
builder = "DOCKERFILE"
# Path to Dockerfile relative to project root
dockerfilePath = "Dockerfile"
# Build context - where COPY commands look for files
context = "."

# -----------------------------------------------------------------------------
# Service Configuration (Flask Web Application)
# -----------------------------------------------------------------------------
[service]
name = "flask-llm-app"
# Required for Railway deployment
restart_policy_type = "ON_FAILURE"
restart_policy_max_retries = 10

# Resource allocation (optional, Railway has defaults)
# [service.resources]
# memory = "512Mi"
# cpu = "0.5"

# -----------------------------------------------------------------------------
# Health Check Configuration
# -----------------------------------------------------------------------------
[service.health_check]
http_path = "/health"
http_method = "GET"
status_codes = [200, 302]
interval = "30s"
timeout = "10s"
grace_period = "60s"
failure_threshold = 3

# -----------------------------------------------------------------------------
# Environment Variables Reference
# -----------------------------------------------------------------------------
# Configure these in Railway Dashboard (Variables tab) or using Railway CLI:
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │ REQUIRED API KEYS                                                        │
# ├─────────────────────────────────────────────────────────────────────────┤
# │ GEMINI_API_KEY=your_gemini_api_key_here                                │
# │   Get from: https://makersuite.google.com/app/apikey                   │
# │                                                                         │
# │ GROQ_API_KEY=your_groq_api_key_here                                    │
# │   Get from: https://console.groq.com/keys                              │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │ DATABASE (Add PostgreSQL Plugin in Railway)                             │
# ├─────────────────────────────────────────────────────────────────────────┤
# │ 1. Click "New Service" → "Database" → "Add PostgreSQL"                 │
# │ 2. PostgreSQL with pgvector support is included                        │
# │ 3. Use Railway's variable ref syntax:                                  │
# │                                                                         │
# │ DATABASE_HOST=${{Postgres.HOSTNAME}}                                   │
# │ DATABASE_NAME=${{Postgres.DATABASE}}                                   │
# │ DATABASE_USER=${{Postgres.USERNAME}}                                   │
# │ DATABASE_PASSWORD=${{Postgres.PASSWORD}}                               │
# │ DATABASE_PORT=${{Postgres.PORT}}                                       │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │ OPTIONAL CONFIGURATION                                                  │
# ├─────────────────────────────────────────────────────────────────────────┤
# │ FLASK_ENV=production                                                   │
# │ SECRET_KEY=your_random_secret_key                                      │
# │                                                                         │
# │ ENCRYPTION_ONEWAY_SALT=your_random_salt                                │
# │ ENCRYPTION_REVERSIBLE_KEY=your_encryption_key                          │
# │                                                                         │
# │ RATE_LIMIT_QUOTA=1000                                                  │
# │ RATE_LIMIT_INTERVAL=1                                                 │
# └─────────────────────────────────────────────────────────────────────────┘

# -----------------------------------------------------------------------------
# Deployment Notes
# -----------------------------------------------------------------------------
# 1. Railway automatically detects this file on git push
# 2. Builds using Dockerfile in the same directory
# 3. Deploys to a public URL with HTTPS
# 4. Auto-deploys on new commits to main branch
# 5. Health checks determine service status
# 6. Logs available in Railway dashboard
# -----------------------------------------------------------------------------
